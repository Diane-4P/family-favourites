{% extends "base.html" %}
{% load static %}
{% load crispy_forms_tags %}

{% block title %}Contacts{% endblock %}

{% block content %}

<!-- Alert for error messages -->
 <div id="error-alert" class="alert alert-danger" role="alert" style="display: none;">
    {% for message in messages %}
        <div class="alert alert-{{ message.tags }}">{{ message }}</div>
    {% endfor %}
</div>

<!-- Bookings using Bootstrap 5.3.0 -->
<div class="container-fluid my-2">
    <div class="card">
        <h2 class="card-header text-center mb-4">Contacts</h2>
        <div class="card-body">
            <div class="row g-3 justify-content-center text-center">
                
                <div class="contacts-summary">
                    <!-- Welcome user and display upcoming bookings -->
                     <p>Welcome {{ user.username }}. These are the people who have contacted the restaurant</p>
                     <a href="#collapse-contacts" class="btn action-btn mb-3 px-2 py-2" data-bs-toggle="collapse" role="button" aria-expanded="false" aria-controls="collapse-contacts">View Contacts</a>
                </div>

                <div id="collapse-contacts" class="collapse container-fluid my-2">
                    <!-- If superuser, only admin to see details -->
                    <!--{% if user.is_superuser %}-->
                    <!-- Table of contacts  -->
                    <table class="table page-card-body">
                        <thead>
                            <tr>
                                <th scope="col">Name</th>
                                <th scope="col">Email Address</th>
                                <th scope="col">Telephone Number</th>
                                <th scope="col">Message details</th>
                             </tr>
                        </thead>
                        <tbody>
                            <!-- Iterate through contacts to add each contact to the table -->
                            {% for contact in contacts %}
                            <tr>
                                <td class="table-text">{{ contact.first_name }} {{ contact.last_name }}</td>
                                <td class="table-text">{{ contact.email }}</td>
                                <td class="table-text">{{ contact.phonenumber }}</td>
                                <td class="table-text">{{ contact.message }}</td>
                            </tr>
                            {% endfor %}
                        </tbody>  
                    </table>
                    <!--{% endif %}  -->
                </div>
            </div>
        </div>
    </div>
</div>

{% endblock %}
